{{ if and (or (eq .osid "linux-pop") (eq .osid "linux-ubuntu")) (not .ephemeral) -}}

#!/bin/bash

set -eufo pipefail

echo "Adding Go PPA..."
# https://launchpad.net/~longsleep/+archive/ubuntu/golang-backports
sudo add-apt-repository -y ppa:longsleep/golang-backports || {
    echo "Warning: Failed to add golang-backports PPA"
}

echo "Adding fastfetch PPA..."
sudo add-apt-repository -y ppa:zhangsongcui3371/fastfetch || {
    echo "Warning: Failed to add fastfetch PPA"
}

echo "Updating package lists..."
sudo apt-get update -qq || {
    echo "Warning: Failed to update package lists"
}

echo "Installing Go and fastfetch..."
sudo apt-get install -y golang-go fastfetch || {
    echo "Warning: Failed to install golang-go and/or fastfetch"
}

{{ end -}}
